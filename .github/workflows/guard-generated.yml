name: guard-generated

on:
  push: {}
  pull_request: {}
  workflow_dispatch: {}

concurrency:
  group: guard-generated-${{ github.ref }}
  cancel-in-progress: true

permissions:
  contents: read

jobs:
  guard-generated:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Verifier que rien de genere nest suivi
        run: |
          set -euo pipefail
          git ls-files | grep -E '^(zz-out|\.ci-out|_tmp-figs|\.ci-logs)/' && {
            echo " Des fichiers generes sont suivis (zz-out/ .ci-out/ _tmp-figs/ .ci-logs/)"
            exit 1
          } || echo " OK: aucun artefact genere suivi"
