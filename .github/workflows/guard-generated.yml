# added by policies_guard_common_fixes
permissions:
  contents: read
name: guard-generated
on: [push, pull_request]
concurrency:
  group: .github/workflows/guard-generated.yml-${{ github.ref }}
  cancel-in-progress: true
jobs:
  guard-generated:
    runs-on: ubuntu-latest
    if: ${{ github.event_name != 'push' || !startsWith(github.ref, 'refs/heads/rewrite/') }}
    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0
      - name: Vérifier que rien de généré n’est suivi
        run: |
          set -euo pipefail
          git ls-files | grep -E '^(zz-out|\.ci-out|_tmp-figs|\.ci-logs)/' && {
            echo "❌ Des fichiers générés sont suivis (zz-out/ .ci-out/ _tmp-figs/ .ci-logs/)"; exit 1; } || echo "✅ OK: aucun artefact généré suivi"
