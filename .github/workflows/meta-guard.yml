# added by policies_guard_common_fixes
permissions:
  contents: read
name: meta-guard
on:
  push:
  pull_request:
concurrency:
  group: .github/workflows/meta-guard.yml-${{ github.ref }}
  cancel-in-progress: true
jobs:
  export-ignore:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Verify .ci-out is not in source archive
        run: |
          git archive -o /tmp/test.zip HEAD
          if unzip -l /tmp/test.zip | grep -q '\.ci-out/'; then
            echo "::error::.ci-out leaked into archive"
            exit 1
          fi
