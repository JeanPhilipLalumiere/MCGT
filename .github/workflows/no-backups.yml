name: no-backups
on:
  pull_request:
    branches: [ main ]
  workflow_dispatch:
jobs:
  no-backups:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Fail if backup/temp files exist
        shell: bash
        run: |
          set -Eeuo pipefail
          # Liste des patterns Ã  bannir (ajuste au besoin)
          bad='(\.bak$|\.tmp$|~$|\.lock\.json$)'
          if git ls-files -z | tr '\0' '\n' | grep -Ei "$bad"; then
            echo "Found backup/temp files matching $bad"; exit 1
          fi
          echo "OK: no backup/temp files"
