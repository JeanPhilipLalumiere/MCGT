repos:
- repo: local
  hooks:
  - id: assets-budgets
    name: assets-budgets
    entry: python3 tools/scan_assets_budget.py
    language: system
    pass_filenames: false
    stages:
    - pre-commit
  - id: gitleaks-protect
    name: gitleaks protect (skip si non installÃ©)
    entry: bash -lc 'command -v gitleaks >/dev/null || exit 0; gitleaks protect --staged
      --no-banner --redact'
    language: system
    stages:
    - pre-commit
    pass_filenames: false
- repo: local
  hooks: []

# --- local hook: smoke --help on changed plot scripts ---
repos:
  - repo: local
    hooks:
      - id: smoke-help-changed-OLD
        entry: bash -lc "exit 0"
        name: smoke --help on changed plot scripts
        language: system
        pass_filenames: false
# disabled:         entry: bash -lc 'git diff --name-only --cached | grep -E "^zz-scripts/.+/plot_.*\.py$" | xargs -r -n1 -P4 python -- --help >/dev/null'

  - repo: local
    hooks:
      - id: smoke-help-changed
        name: smoke --help on changed plot scripts
        entry: tools/hooks/smoke_help_changed.sh
        language: system
        pass_filenames: false
        stages: [commit]
