{
"\$schema": "[https://json-schema.org/draft/2020-12/schema](https://json-schema.org/draft/2020-12/schema)",
"\$id": "zz-schemas/07\_scalar\_perturbations\_meta.schema.json",
"title": "Chapter 07 — Perturbations (meta)",
"description": "Schéma des métadonnées pour les sorties du Chapitre 7 (perturbations scalaires). Fichier cible: 07\_meta\_perturbations.json.",
"type": "object",
"\$defs": {
"fileRef": {
"type": "object",
"description": "Référence de fichier avec intégrité optionnelle.",
"properties": {
"path": {
"type": "string",
"minLength": 1,
"description": "Chemin relatif depuis la racine du dépôt (utiliser '/').",
"pattern": "^\[^\s].+\[^\s]\$"
},
"role": {
"type": "string",
"description": "Rôle du fichier dans le pipeline.",
"enum": \["input", "output", "figure", "config", "meta", "log", "other"]
},
"sha256": {
"type": "string",
"description": "Empreinte SHA-256 hexadécimale.",
"pattern": "^\[0-9a-fA-F]{64}\$"
},
"size\_bytes": { "type": "integer", "minimum": 0 },
"mtime\_iso": { "type": "string", "format": "date-time" }
},
"required": \["path"],
"additionalProperties": false
}
},
"properties": {
"generated\_at": { "type": "string", "format": "date-time", "description": "Horodatage ISO de création du meta." },
"producer\_script": { "type": "string", "description": "Chemin relatif du script producteur (optionnel). Exemple: zz-scripts/chapter7/generate\_chapter7\_data.py" },
"git\_hash": { "anyOf": \[{ "type": "string", "minLength": 7 }, { "type": "null" }], "description": "Commit utilisé pour reproduire (optionnel)." },
"version": { "type": "string", "description": "Tag/version lisible (optionnel)." },

```
"n_points": { "type": "integer", "minimum": 0, "description": "Somme des points principaux (ex. grille k×a)." },

"files": {
  "type": "array",
  "description": "Fichiers liés générés par le chapitre 7 (chemins relatifs).",
  "items": {
    "oneOf": [
      { "type": "string", "minLength": 1 },
      { "$ref": "#/$defs/fileRef" }
    ]
  },
  "minItems": 1
},

"params_ref": {
  "type": "object",
  "description": "Copie légère des paramètres principaux (pour QC rapide).",
  "properties": {
    "k_min": { "type": "number", "minimum": 0 },
    "k_max": { "type": "number", "exclusiveMinimum": 0 },
    "n_k": { "type": "integer", "minimum": 1 },
    "a_min": { "type": "number", "minimum": 0, "maximum": 1 },
    "a_max": { "type": "number", "minimum": 0, "maximum": 1 },
    "n_a": { "type": "integer", "minimum": 1 },
    "alpha": { "type": "number" }
  },
  "additionalProperties": false
},

"summary_stats": {
  "type": "object",
  "description": "Statistiques rapides utiles au contrôle qualité.",
  "properties": {
    "cs2_min": { "type": "number" },
    "cs2_max": { "type": "number" },
    "delta_phi_min": { "type": "number" },
    "delta_phi_max": { "type": "number" },
    "n_nonfinite": { "type": "integer", "minimum": 0 }
  },
  "additionalProperties": false
},

"repro": {
  "type": "object",
  "description": "Instantané de l’environnement d’exécution.",
  "properties": {
    "python": { "type": "string" },
    "libs": { "type": "object", "additionalProperties": { "type": "string" } }
  },
  "additionalProperties": false
},

"notes": { "type": "string", "description": "Notes libres (filtres, avertissements, anomalies)." }
```

},

"required": \["generated\_at", "n\_points", "files"],
"additionalProperties": false,

"examples": \[
{
"generated\_at": "2025-08-23T12:00:00Z",
"producer\_script": "zz-scripts/chapter7/generate\_chapter7\_data.py",
"git\_hash": "abcdef1",
"version": "chap7-v601.30",
"n\_points": 18030,
"files": \[
{ "path": "zz-data/chapter7/07\_dcs2\_dk.csv", "role": "output" },
{ "path": "zz-data/chapter7/07\_ddelta\_phi\_dk.csv", "role": "output" },
{ "path": "zz-data/chapter7/07\_main\_perturbations\_data.csv", "role": "output" },
{ "path": "zz-data/chapter7/07\_scalar\_invariants.csv", "role": "output" },
{ "path": "zz-data/chapter7/07\_perturbations\_domain.csv", "role": "output" },
{ "path": "zz-data/chapter7/07\_perturbations\_boundary.csv", "role": "output" },
{ "path": "zz-data/chapter7/07\_scalar\_perturbations\_results.csv", "role": "output" },
{ "path": "zz-data/chapter7/07\_cs2\_matrix.csv", "role": "output" },
{ "path": "zz-data/chapter7/07\_delta\_phi\_matrix.csv", "role": "output" }
],
"params\_ref": { "k\_min": 0.0001, "k\_max": 10.0, "n\_k": 501, "a\_min": 0.05, "a\_max": 1.0, "n\_a": 20, "alpha": 0.5 },
"summary\_stats": { "cs2\_min": 0.999999, "cs2\_max": 1.000001, "delta\_phi\_min": 0.0, "delta\_phi\_max": 0.005, "n\_nonfinite": 0 },
"repro": { "python": "3.12.3", "libs": { "numpy": "2.3.1", "pandas": "2.3.1" } },
"notes": "cs2 \~ 1; vérifier n\_nonfinite==0."
}
]
}
